var SmartformConfigInit=function(e,t,n,r,i){function f(){var t=o.toFixed(2)*u;t!=NaN?$("#"+e).find(".total").val(t):$("#"+e).find(".total").val(0)}var s=null,o=parseFloat($("#"+e).find(".flquick_smart_radio_product label").attr("num")),u=1;f();var a=window.FlquickCommon.getUrlParam("rid");$("#"+e).delegate(".flquick_smart_radio_product .sm-radio-input","click",function(){o=parseFloat($(this).attr("num")),$(this).parent().siblings().removeClass("now"),$(this).parent().addClass("now"),f()}),$("#"+e).delegate("#fresh-qrcode","click",function(e){var t=$(this).attr("src");t.indexOf("?")>0&&(t=t.split("?")[0]),$(this).attr("src",t+"?t="+ +(new Date))}),$("#"+e).delegate(".flquick_smart_radio_color .sm-radio-input","click",function(){$(this).parent().siblings().removeClass("now"),$(this).parent().addClass("now")}),$("#"+e).delegate(".flquick_smart_radio_size .sm-radio-input","click",function(){$(this).parent().siblings().removeClass("now"),$(this).parent().addClass("now")}),$("#"+e).find(".flquick_smart_radio_product .sm-radio-input").first().click(),$("#"+e).delegate(".flquick_smart_radio_multiselect .sm-radio-input","click",function(){$(this).parent().siblings().removeClass("now"),$(this).parent().addClass("now")}),$("#"+e).delegate(".flquick_smart_radio_multiselects .sm-radio-input","click",function(e){$(this).parent().hasClass("now")?$(this).parent().removeClass("now"):$(this).parent().addClass("now")}),$("#"+e).delegate(".jian","click",function(){var t=$("#"+e).find(".shuliang").val();t>1&&(u=parseInt(t)-1),$("#"+e).find(".shuliang").val(u),f()}),$("#"+e).delegate(".jia","click",function(){var t=$("#"+e).find(".shuliang").val();u=parseInt(t)+1,$("#"+e).find(".shuliang").val(u),f()});var l=window._regionMap;for(var c in l)l.hasOwnProperty(c)&&$("#"+e).find(".prov").append('<option data-id="'+c+'" value="'+l[c][0]+'">'+l[c][0]+"</option> ");var h="";$("#"+e).find(".prov").change(function(){var t=$(this).find("option:selected").data("id");if(t=="-1")return;if(t==undefined)return;h=l[t][2];var n='<option selected="selected" data-provinceid="-1"  data-cityid="-1" value="\u672a\u9009\u62e9">\u8bf7\u9009\u62e9\u57ce\u5e02</option> ';for(var r in h)n+='<option data-provinceid="'+t+'" data-cityid="'+r+'" value="'+h[r][0]+'">'+h[r][0]+"</option> ";$("#"+e).find(".city").html(n)}),$("#"+e).find(".city").change(function(){var t=$(this).find("option:selected").data("provinceid");if(t=="-1")return;if(t==undefined)return;var n=$(this).find("option:selected").data("cityid");if(n=="-1")return;if(n==undefined)return;arealist=l[t][2][n][2];var r='<option selected="selected" data-id="-1" value="\u672a\u9009\u62e9">\u8bf7\u9009\u62e9\u884c\u653f\u533a</option> ';for(var i in arealist)r+='<option value="'+arealist[i][0]+'">'+arealist[i][0]+"</option> ";$("#"+e).find(".area").html(r)}),function(e){e.fn.serializeJson=function(){var t={};return e(this.serializeArray()).each(function(){typeof t[this.name]!="undefined"?t[this.name]=t[this.name]+","+this.value:t[this.name]=this.value}),t}}(jQuery);var p=function(e){var t="";for(var n in e)t=t+n+"="+e[n]+"&";return t=t.substr(0,t.length-1),t};$("#"+e).delegate(".smartform_submit","click",function(){function l(){f=!0,$.ajax({type:"post",data:u+"&pageModuleId="+t+"&rId="+rid,dataType:"json",timeout:8e3,url:"/form/getToken?"+Math.random(),success:function(o){f=!1;if(o.code==1){var a=o.data.token;$.ajax({type:"post",data:u+"&pageModuleId="+t+"&token="+a+"&rId="+rid,dataType:"json",url:"/form/create?"+Math.random(),success:function(t){$("#fresh-qrcode").click(),t.code==1?(n&&n!=""&&r&&r!=""&&window.FlquickCommon.pixelReport("form",n,r,$("#"+e+"_form")),window.FlquickCommon.gdtReport.event("form"),s=u,i.download==1&&i.link!=""?window.FlquickCommon.windowopen(i.link,"_self"):WEUI.alert({title:"\u6e29\u99a8\u63d0\u793a",content:"\u63d0\u4ea4\u6210\u529f"})):t.code==-65535?WEUI.alert({title:"\u6e29\u99a8\u63d0\u793a",content:"\u7531\u4e8e\u4f60\u957f\u65f6\u95f4\u672a\u64cd\u4f5c\uff0c\u8bf7\u786e\u5b9a\u540e\u91cd\u65b0\u63d0\u4ea4",onOk:function(){window.location.href=FlquickCommon.changeUrlArg(window.location.href,"rd",(new Date).getTime())}}):t.code==-4002?WEUI.alert({title:"\u6e29\u99a8\u63d0\u793a",content:"\u9a8c\u8bc1\u7801\u8f93\u5165\u9519\u8bef"}):t.code==-4001?WEUI.alert({title:"\u6e29\u99a8\u63d0\u793a",content:"\u9a8c\u8bc1\u7801\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"}):WEUI.alert({title:"\u6e29\u99a8\u63d0\u793a",content:"\u4fdd\u5b58\u5931\u8d25,\u8bf7\u7a0d\u540e\u518d\u8bd5"})},error:function(){WEUI.alert({title:"\u6e29\u99a8\u63d0\u793a",content:"\u4fdd\u5b58\u5931\u8d25,\u8bf7\u7a0d\u540e\u518d\u8bd5"})}})}else WEUI.alert({title:"\u6e29\u99a8\u63d0\u793a",content:"\u83b7\u53d6token\u5931\u8d25"})},error:function(){WEUI.alert({title:"\u6e29\u99a8\u63d0\u793a",content:"\u83b7\u53d6token\u5931\u8d25"})}})}if(f)return!1;var o=$(this).data("clickid"),u=p($("#"+e+"_form").serializeJson()),a=!0;$("#"+e).find(".flquick_smart_radio").each(function(){var e=$(this);if($(this).parents(".weui-cell").find(".red").length>=1&&$(this).find(".sm-radio-input:checked").length<1)return WEUI.alert({title:"",content:"\u8bf7\u8f93\u5165"+$.trim($(this).parents(".weui-cell").find(".weui-label").html().split("<")[0])}),a=!1,!1}),$("#"+e).find(".weui-input,.weui-textarea,.weui-select").each(function(){var e=$(this).data("validator"),t=$(this).html(),n=$.trim($(this).val());if($(this).parents(".weui-cell").find(".red").length>=1){if($.trim(n)=="")return WEUI.alert({title:"",content:"\u8bf7\u8f93\u5165"+$.trim($(this).parents(".weui-cell").find(".weui-label").html().split("<")[0])}),a=!1,!1;if($.trim(n)=="\u672a\u9009\u62e9")return WEUI.alert({title:"",content:"\u8bf7\u9009\u62e9"+$.trim($(this).parents(".weui-cell").find(".weui-label").html().split("<")[0])}),a=!1,!1}if(e=="name"&&$.trim(n)!=""){if(!/^[\u4e00-\u9fa5]+$/i.test(n))return WEUI.alert({title:"",content:"\u59d3\u540d\u5fc5\u987b\u7531\u6c49\u5b57\u7ec4\u6210"}),a=!1,!1;if(n.length<1)return WEUI.alert({title:"",content:"\u59d3\u540d\u81f3\u5c11\u662f1\u4e2a\u6c49\u5b57\u6216\u4ee5\u4e0a"}),a=!1,!1;if(n.length>10)return WEUI.alert({title:"",content:"\u59d3\u540d\u6700\u591a\u542b\u670910\u4e2a\u6c49\u5b57"}),a=!1,!1}else if(e=="phone"&&$.trim(n)!=""){var r=/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/,i=/^((0\d{2,3}))(\d{7,8})(-(\d{3,}))?$/,s=/^0?(13[0-9]|14[012356789]|15[012356789]|17[012356789]|18[0123456789]|14[57])[0-9]{8}$/,o=/^(400)-(\d{3})-(\d{4})$/,u=/^(400)(\d{3})(\d{4})$/;if(!s.test(n)&&!r.test(n)&&!i.test(n)&&!o.test(n)&&!u.test(n))return WEUI.alert({title:"",content:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u7535\u8bdd\u53f7\u7801"}),a=!1,!1}else if(e=="password"){var f=/^[A-Za-z\d_.]+$/;if(!f.test(n)||n.length>16||n.length<6)return WEUI.alert({title:"",content:"\u5bc6\u7801\u4e3a6-16\u4f4d\u5b57\u6bcd\u6216\u6570\u5b57\u6216\u4e0b\u5212\u7ebf\uff01"}),a=!1,!1}});var f=!1;a&&(s==u?WEUI.confirm({title:"\u6e29\u99a8\u63d0\u793a",content:"\u4f60\u63d0\u4ea4\u7684\u6570\u636e\u6ca1\u6709\u505a\u4efb\u4f55\u4fee\u6539\uff0c\u662f\u5426\u9700\u8981\u518d\u6b21\u63d0\u4ea4\uff1f",submitCallback:function(){l()}}):l())})};